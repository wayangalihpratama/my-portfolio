services:
  portfolio_dev:
    # 1. Build the container image using the Dockerfile in the current directory
    build:
      context: .
      dockerfile: Dockerfile

    # 2. Map the container's port 4321 to your host machine's port 4321
    ports:
      - "4321:4321"

    # 3. Mount the local directory to the container's working directory
    # This enables instant file updates (Hot Module Replacement)
    volumes:
      - .:/app
      # Exclude the node_modules folder from the volume mount.
      # This ensures the container uses the dependencies it installed internally,
      # preventing compatibility issues between your host and container OS.
      - /app/node_modules

    # 4. Keep the container running for development
    tty: true
    stdin_open: true

    # 5. Execute the default command defined in the Dockerfile (pnpm run dev --host)